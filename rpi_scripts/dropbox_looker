#/bin/bash

while true; do
    resp=$(/home/pi/Documents/Dropbox-Uploader/dropbox_uploader.sh list)
    if [ "${#resp}" -ne 23 ]; then
        substr=$(echo $resp | cut -c27-${#resp})
        id=$(echo $substr | cut -d'_' -f 1)
        param1=$(echo $substr | cut -d'_' -f 2)
        param2=$(echo $substr | cut -d'_' -f 3)
        
        if [ "$id" == "tvchan" ]; then
            /home/pi/Documents/tv_scripts/chng_channel $param1 $param2
        elif [ "$id" == "tvvolume" ]; then
            /home/pi/Documents/tv_scripts/chng_volume $param1 $param2
        elif [ "$id" == "tvinput" ]; then 
            /home/pi/Documents/tv_scripts/chng_input $param1
        elif [ "$id" == "tvkey" ]; then 
            /home/pi/Documents/tv_scripts/key $param1
        else
            /home/pi/Documents/socket_scripts/socket $param1 $param2
        fi
        /home/pi/Documents/Dropbox-Uploader/dropbox_uploader.sh delete $substr

    fi
    sleep 1
done
